import XCTest
import HTTP
import Dispatch
@testable import HTTP2
import Async

public class HTTP2Tests: XCTestCase {
    static let allTests = [
        ("testClient", testClient)
    ]
    
    func testClient() throws {
//        #if os(Linux)
//            let queue = DispatchQueue(label: "http2.client")
//            
//            let response = try HTTP2Client.connect(hostname: "google.com", worker: queue).flatMap { client -> Future<Response> in
//                let request = Request(method: .get, uri: "/", headers: [
//                    .host: "www.google.com"
//                ], body: Body())
//                
//                return try client.send(request)
//            }.blockingAwait(timeout: .seconds(10))
//            
//            XCTAssertEqual(response.status, 302)
//        #else
//            print("WARNING: For macOS, HTTP/2 needs Apple's ALPN support or an OpenSSL dependency")
//        #endif
    }
}
